{% extends "layout.html" %}
{% block content %}
<div class="d-flex justify-content-between flex-wrap align-items-center mb-4">
    <h3 class="mb-0">{{ get_translation('devices.title') }}: {{ device.name }}</h3>
    <small class="text-muted">{{ get_translation('general.info') }}: <code>voice translation-rule 2</code></small>
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-light">
            <tr>
                <th scope="col" class="d-none d-md-table-cell">{{ get_translation('general.id') }}</th>
                <th scope="col">{{ get_translation('devices.source') }}</th>
                <th scope="col">{{ get_translation('devices.current') }}</th>
                <th scope="col">{{ get_translation('devices.new_destination') }}</th>
                <th scope="col">{{ get_translation('devices.action') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for rule in rules %}
            <tr>
                <form method="POST" class="mb-0">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <td class="d-none d-md-table-cell align-middle">
                        {{ rule.id }}
                        <input type="hidden" name="rule_id" value="{{ rule.id }}">
                        <input type="hidden" name="raw_source" value="{{ rule.raw_source }}">
                    </td>
                    <td class="align-middle">
                        <strong>{{ rule.source }}</strong>
                        <div class="d-md-none text-muted small">Rule {{ rule.id }}</div>
                    </td>
                    <td class="align-middle">
                        <span class="badge bg-info">{{ rule.destination }}</span>
                    </td>
                    <td class="align-middle">
                        <input type="number" name="new_dest" class="form-control form-control-sm" placeholder="New Number" required>
                    </td>
                    <td class="align-middle">
                        <button type="submit" class="btn btn-success btn-sm w-100" onclick="return confirm('{{ get_translation('devices.update_button') }}?');">
                            <i class="bi bi-arrow-repeat"></i> {{ get_translation('devices.update_button') }}
                        </button>
                    </td>
                </form>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if rules|length == 0 %}
<div class="alert alert-info mt-4">
    {{ get_translation('devices.no_rules') }}
</div>
{% endif %}
{% endblock %}
